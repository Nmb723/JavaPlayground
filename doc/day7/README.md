# JUnit道場1

## シラバス
### 基礎編
- **JUnit道場1: JUnitを書いて実行してみよう（←いまここ）**
- JUnit道場2: hamcrestを使ったアサーションを書いてみよう
- JUnit道場3: 扱いにくいクラスをモックしよう
- JUnit道場4: mockitoを使ってモックを簡単に書こう

### 鑑賞会
[t_wadaさんのライブコーディング](https://www.youtube.com/watch?v=Q-FJ3XmFlT8)の鑑賞会をします。(実況・解説：監督、寺尾)

### 実践編
- 実践編1: なぜテストがかけないか(DependencyInjection)
- 実践編2: レガシーコードを（できるだけ）安全にリファクタリングしてみよう
- 卒業課題: プロダクトのコードにテストを追加しよう

## 事前準備
このレポジトリ https://github.com/Null-PE/JavaPlayground.git
をcloneして、EclipseでImportしてください。

## ハンズオン1: JUnitを作成して実行してみよう。
1. Package Explorer で[StringConverter.java](../../src/main/java/day7/StringConverter.java)　を選択した状態で
   右クリック > New > Otherを選択し、ウィザードから JUnit > JUnit Test caseを選択
2. ウィザードを進めて `StringConverterTest.java` を作る
3. `仕様1: [a-z0-9]の文字は置換しないでください` をテストするメソッドを追加してください。
   - ポイント1：テストメソッド名はテスト対象のメソッド名+仕様を表現したものにしてください
   - camelCase等の命名規則は忘れて良いです。わかりやすさが最優先されます。英語に自信がなければ日本語でも構いません
   - おすすめフォーマットは `${メソッド名}_${返り値の仕様}_${引数の仕様}`です。(日本語なら引数、返り値の順)
     - OK: sanitizeName_ReturnAsIs_IfArgumentConsistsOfLowerAlphaNumericChars
     - OK: sanitizeName_小文字アルファベットと数字はそのまま返す
     - NG: testSanitizeName1
     - NG: testSanitizeName_ReturnAsIs
   - 与えるテストデータは仕様に必要なものを選びましょう。
     - `[a-z0-9]` なので 境界となる `a,z,0,9`は必ず含めましょう
4. テストを実行し、通っている事を確認しましょう。
5. カバレッジを確認し、意図通りにコードが実行されているか確認しましょう。

## ハンズオン2: テスト駆動開発をしてみよう。
次に ~`仕様2: 空白文字はまとめてハイフン（-）に置換してください`~ `仕様3: 大文字は小文字にしてください` をテスト駆動開発で実装します。

この仕様はAPIを使うと楽に実装できますが、テスト駆動開発の練習の為に、可能ならAPIを使わずに実装しましょう。

1. まず仕様を表現するテストを追加します
2. テストを通過するように実装を追加します。テストが通ったらカバレッジも確認してください。
3. テストコードの重複した部分を取り除くリファクタリングをします。

## 課題: 残りの仕様を実装しよう
残りの仕様を順番にテスト駆動開発で実装してください。
- 仕様2: 空白文字はまとめてハイフン（-）に置換してください
- 仕様4: それ以外の文字は１文字ずつアンダースコア(_)に置換してください


## CheatSheet

### `@Test`
- このアノテーションをつけるとテストメソッドが実行されます。
- JUnit4ではpublicメソッドじゃないと実行できないので注意。
- `@Ignore` をつけるとスキップされます。

### `assertEquals(expected, actual)`
- 一番簡単なアサーションメソッドです。
- 第一引数に期待値、第二引数に実際の値を入れます。
- JUnit道場２回目からhamcrestを使ったアサーションで書いてもらうので使うのは今回だけです。

### `@Before`, `@After`
- テスト実行前後に行いたい初期化処理、後始末を記述します。
- Beforeでは主にテストメソッドに共通した初期化処理を行います
- Afterでは主にテストメソッドで作成したデータ、ファイルの削除処理を行います。
- 1ケースごとに実行されます。
- 伝統的に `setUp()`, `tearDown()`と名付ける事が多いです。

### `@BeforeClass`, `@AfterClass`
- テストクラスの読み込み時と、そのクラスの全テストメソッド実行後に行う処理を記述します。
- `public static`なメソッドにする必要があります。 
- 例えば、モックサーバの起動、終了や、作業用ディレクトリの作成、削除を行います。
- こちらは名前は特に決まっていません。（JUnit3にはない機能のため）
